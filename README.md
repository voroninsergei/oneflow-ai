# OneFlow.AI v2.0 - Production Ready ğŸš€

> Enterprise-grade AI Model Aggregator Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹, Ñ†ĞµĞ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼, Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¾Ğ¹ Ğ¸ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ observability

[![Production Ready](https://img.shields.io/badge/Production-Ready-success)](/)
[![Test Coverage](https://img.shields.io/badge/Coverage-80%25-green)](/)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue)](/)
[![Kubernetes](https://img.shields.io/badge/Kubernetes-Ready-blue)](/)
[![License](https://img.shields.io/badge/License-Proprietary-red)](/)

---

## ğŸ¯ Ğ§Ñ‚Ğ¾ ÑÑ‚Ğ¾?

OneFlow.AI - ÑÑ‚Ğ¾ **Ñ†ĞµĞ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¸ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹ ÑĞ»Ğ¾Ğ¹** Ğ´Ğ»Ñ AI-Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹:

- ğŸ”€ **ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚** Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½ÑƒÑ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (Ñ†ĞµĞ½Ğ°/ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ/ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾)
- ğŸ’° **ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ğ¾Ğµ Ñ†ĞµĞ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ñ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ğº ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ°Ğ¼
- ğŸ”„ **Ğ£Ğ¼Ğ½Ñ‹Ğµ fallback** Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ² (99.9% uptime)
- ğŸ“Š **Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°** Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚
- ğŸ” **Enterprise security** Ñ JWT, API keys rotation, CORS
- ğŸ“ˆ **Production observability** Ñ Prometheus, Grafana, OpenTelemetry

---

## âœ¨ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

### ğŸ¤– ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ñ‹

| ĞŸÑ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€ | ĞœĞ¾Ğ´ĞµĞ»Ğ¸ | Ğ¢Ğ¸Ğ¿ |
|-----------|--------|-----|
| **OpenAI** | GPT-4, GPT-4 Turbo, GPT-4o, GPT-3.5-turbo, DALL-E | Text, Image |
| **Anthropic** | Claude 3 Opus, Sonnet, Haiku | Text |
| **Stability AI** | Stable Diffusion XL, SD3 | Image |
| **ElevenLabs** | Multilingual v2 | Audio |

### ğŸ’ Production-Ready Features

âœ… **Observability**
- Prometheus metrics Ğ½Ğ° `/metrics`
- Structured logging (JSON)
- OpenTelemetry distributed tracing
- Health/readiness probes

âœ… **Reliability**  
- Circuit breaker Ñ exponential backoff
- Retry Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ñ jitter
- Timeouts (connect: 10s, read: 30s)
- Ğ˜Ğ´ĞµĞ¼Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- Quotas per-user/per-provider/per-project

âœ… **Security**
- JWT authentication + refresh tokens
- API keys Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸ĞµĞ¹
- Security headers (HSTS, CSP, X-Frame-Options)
- Request size limits (10MB)
- Secrets sanitization Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ…
- Rate limiting (60/min, 1000/hour)

âœ… **Smart Routing**
- Cost-optimized: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
- Latency-optimized: Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ
- Quality-optimized: Ğ»ÑƒÑ‡ÑˆĞµĞµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾
- Balanced: Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ

âœ… **Token-Based Billing**
- Ğ¢Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ input/output Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
- ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğº ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ°Ğ¼ (1 USD = 100 credits)
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
- Property-based Ñ‚ĞµÑÑ‚Ñ‹ (Hypothesis)

---

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### ĞŸÑ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- Python 3.11+
- Docker 20.10+ Ğ¸ Docker Compose 2.0+
- PostgreSQL 14+ (Ğ¸Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ docker-compose)
- Redis 7+ (Ğ¸Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ docker-compose)

### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

```bash
# 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
git clone https://github.com/voroninsergei/oneflow-ai.git
cd oneflow-ai

# 2. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
make install

# 3. ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
cp .env.example .env
nano .env  # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ API ĞºĞ»ÑÑ‡Ğ¸ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ²
```

### Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² (PostgreSQL, Redis, Prometheus, Grafana)
make docker-up

# Ğ—Ğ°Ğ¿ÑƒÑĞº development ÑĞµÑ€Ğ²ĞµÑ€Ğ°
make dev

# ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ API Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
open http://localhost:8000/docs
```

### Docker Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°
make docker-build

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ stack
make docker-up

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ
scripts/health_check.sh

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº
open http://localhost:8000/metrics
```

### Kubernetes Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ secrets
kubectl create secret generic oneflow-secrets \
  --from-literal=JWT_SECRET=$(openssl rand -hex 32) \
  --from-literal=OPENAI_API_KEY=sk-your-key \
  --from-literal=ANTHROPIC_API_KEY=sk-ant-your-key

# Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ
make k8s-deploy

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
make k8s-status

# Port forward
make k8s-port-forward
```

---

## ğŸ“– Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Python SDK

```python
from src.pricing_v2 import PricingEngine, IntelligentRouter, RoutingStrategy
from src.middleware.circuit_breaker import ResilientHTTPClient

# Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
engine = PricingEngine()
router = IntelligentRouter(engine)

# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ¾ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
decision = router.route(
    input_tokens=1500,
    output_tokens=500,
    strategy=RoutingStrategy.COST_OPTIMIZED,
    modality="text"
)

print(f"Primary model: {decision.primary_model}")
print(f"Estimated cost: {decision.estimated_credits} credits")
print(f"Fallback chain: {decision.fallback_chain}")

# Resilient HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ñ circuit breaker
client = ResilientHTTPClient(
    provider_name="openai",
    timeout=30.0,
    max_retries=3
)

response = await client.post(
    url="https://api.openai.com/v1/chat/completions",
    json={"model": "gpt-4", "messages": [...]},
    headers={"Authorization": f"Bearer {api_key}"},
    idempotency_key="req-unique-id"
)
```

### REST API

```bash
# Health check
curl http://localhost:8000/health

# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ†ĞµĞ½ĞºĞ¸ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
curl -X POST http://localhost:8000/api/v1/estimate \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "input_tokens": 1500,
    "output_tokens": 500,
    "strategy": "cost_optimized"
  }'

# ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
curl -X POST http://localhost:8000/api/v1/request \
  -H "X-API-Key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Write a haiku about AI",
    "strategy": "balanced"
  }'
```

---

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Prometheus)

```bash
# ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Prometheus UI
make prometheus

# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² (PromQL):
# Request rate
rate(http_requests_total[5m])

# Average latency
rate(http_request_duration_seconds_sum[5m]) / 
rate(http_request_duration_seconds_count[5m])

# Error rate
sum(rate(http_requests_total{status=~"5.."}[5m])) / 
sum(rate(http_requests_total[5m]))
```

### Dashboards (Grafana)

```bash
# ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Grafana (admin/admin)
make grafana

# Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ñ‹:
# - FastAPI: ID 11713
# - PostgreSQL: ID 9628
# - Redis: ID 11835
```

### Distributed Tracing (Jaeger)

```bash
# Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ² .env
ENABLE_TRACING=true

# ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Jaeger UI
make jaeger
```

---

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹
make test

# Ğ¡ coverage
make test-coverage

# Property-based Ñ‚ĞµÑÑ‚Ñ‹
make test-property

# Linting
make lint

# Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
make format

# ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿ĞµÑ€ĞµĞ´ prod
make prod-check
```

---

## ğŸ“š Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

- **[DEPLOYMENT.md](DEPLOYMENT.md)** - ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ
- **[PRODUCTION_CHECKLIST.md](PRODUCTION_CHECKLIST.md)** - Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ĞµĞ´ Ñ€ĞµĞ»Ğ¸Ğ·Ğ¾Ğ¼
- **[IMPLEMENTATION_SUMMARY.md](IMPLEMENTATION_SUMMARY.md)** - Ğ¡Ğ²Ğ¾Ğ´ĞºĞ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
- **[API Docs](http://localhost:8000/docs)** - OpenAPI/Swagger Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Client Applications            â”‚
â”‚   (Web, Mobile, CLI, Python SDK)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FastAPI Application             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Security Middleware               â”‚ â”‚
â”‚  â”‚  (CORS, Headers, Size Limits)      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Authentication                    â”‚ â”‚
â”‚  â”‚  (JWT, API Keys)                   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Intelligent Router                â”‚ â”‚
â”‚  â”‚  (Cost/Latency/Quality)            â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Circuit Breaker & Retry           â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Pricing Engine                    â”‚ â”‚
â”‚  â”‚  (Token-based billing)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      AI Providers (with Fallbacks)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OpenAI â”‚ â”‚Anthropic â”‚ â”‚Stability  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Data & Monitoring               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Postgresâ”‚ â”‚ Redis â”‚ â”‚  Prometheus  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°

- **Authentication**: JWT tokens + API keys
- **Authorization**: Role-based access control
- **Rate Limiting**: 60 req/min, 1000 req/hour
- **Input Validation**: Pydantic models
- **SQL Injection**: SQLAlchemy ORM
- **XSS Protection**: Security headers
- **Secrets Management**: Rotation + grace period

### Security Headers

```
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
Strict-Transport-Security: max-age=31536000
Referrer-Policy: strict-origin-when-cross-origin
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸

```bash
# Security audit
make security-check

# Dependency audit
make audit

# Container scanning
docker scan oneflow-ai:2.0.0
```

---

## ğŸ’° Ğ¦ĞµĞ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸

| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | Input ($/1M tokens) | Output ($/1M tokens) | Credits/1K tokens |
|--------|---------------------|----------------------|-------------------|
| GPT-4o | $2.50 | $10.00 | 0.25 - 1.00 |
| GPT-4 Turbo | $10.00 | $30.00 | 1.00 - 3.00 |
| GPT-4 | $30.00 | $60.00 | 3.00 - 6.00 |
| GPT-3.5-turbo | $0.50 | $1.50 | 0.05 - 0.15 |
| Claude 3 Opus | $15.00 | $75.00 | 1.50 - 7.50 |
| Claude 3 Sonnet | $3.00 | $15.00 | 0.30 - 1.50 |
| Claude 3 Haiku | $0.25 | $1.25 | 0.03 - 0.13 |

*Ğ¦ĞµĞ½Ñ‹ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹ Ğ½Ğ° ÑĞ½Ğ²Ğ°Ñ€ÑŒ 2025*

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°

```python
# GPT-4: 1500 input + 500 output Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
input_cost = (1500 / 1_000_000) * 30.00 = $0.045
output_cost = (500 / 1_000_000) * 60.00 = $0.030
total_usd = $0.075
credits = 0.075 * 100 = 7.5 credits
```

---

## ğŸ“ˆ Performance

### SLI/SLO

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ¦ĞµĞ»ÑŒ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|---------|------|--------|
| **Availability** | 99.9% | âœ… |
| **Latency p95** | < 500ms | âœ… |
| **Latency p99** | < 1s | âœ… |
| **Error Rate** | < 0.1% | âœ… |
| **Throughput** | 1000 req/s | âœ… |

### Benchmarks

```bash
# Load testing Ñ k6
k6 run tests/load/benchmark.js

# Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ (Ğ½Ğ° 4 CPU, 8GB RAM):
# âœ“ http_req_duration..........: avg=245ms p95=450ms p99=850ms
# âœ“ http_reqs..................: 1000 req/s
# âœ“ http_req_failed............: 0.05%
```

---

## ğŸ› ï¸ Makefile ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

### Development

```bash
make install          # Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
make install-dev      # Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ñ dev dependencies
make dev              # Ğ—Ğ°Ğ¿ÑƒÑĞº dev ÑĞµÑ€Ğ²ĞµÑ€Ğ°
make test             # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… Ñ‚ĞµÑÑ‚Ğ¾Ğ²
make test-coverage    # Ğ¢ĞµÑÑ‚Ñ‹ Ñ coverage
make lint             # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ´Ğ°
make format           # Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°
make type-check       # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¸Ğ¿Ğ¾Ğ² (mypy)
```

### Docker

```bash
make docker-build     # Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°
make docker-up        # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
make docker-down      # ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
make docker-logs      # ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²
make docker-restart   # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
make docker-shell     # Shell Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ
make docker-clean     # ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° volumes Ğ¸ images
```

### Kubernetes

```bash
make k8s-deploy       # Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² K8s
make k8s-delete       # Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
make k8s-status       # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ deployment
make k8s-logs         # Ğ›Ğ¾Ğ³Ğ¸ Ğ¿Ğ¾Ğ´Ğ¾Ğ²
make k8s-port-forward # Port forward Ğ½Ğ° localhost
```

### Database

```bash
make db-migrate       # ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
make db-rollback      # ĞÑ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ
make db-reset         # Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ‘Ğ” (ĞĞŸĞĞ¡ĞĞ!)
make db-shell         # PostgreSQL shell
```

### Monitoring

```bash
make prometheus       # ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Prometheus
make grafana          # ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Grafana
make jaeger           # ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Jaeger
```

### Maintenance

```bash
make clean            # ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
make clean-all        # ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ°
make security-check   # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
make audit            # ĞÑƒĞ´Ğ¸Ñ‚ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
make prod-check       # Ğ’ÑĞµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ´ prod
make prod-build       # Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° production Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°
```

---

## ğŸŒ ĞĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

### Development

```bash
ENVIRONMENT=development
LOG_LEVEL=DEBUG
DATABASE_URL=postgresql://localhost:5432/oneflow
REDIS_URL=redis://localhost:6379/0
```

### Staging

```bash
ENVIRONMENT=staging
LOG_LEVEL=INFO
DATABASE_URL=postgresql://staging-db:5432/oneflow
REDIS_URL=redis://staging-redis:6379/0
ENABLE_TRACING=true
```

### Production

```bash
ENVIRONMENT=production
LOG_LEVEL=WARNING
DATABASE_URL=postgresql://prod-db:5432/oneflow
REDIS_URL=redis://prod-redis:6379/0
ENABLE_METRICS=true
ENABLE_TRACING=true
```

---

## ğŸ”„ CI/CD Pipeline

### GitHub Actions (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€)

```yaml
name: CI/CD

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run tests
        run: make test-coverage
      - name: Security check
        run: make security-check
  
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Build Docker image
        run: make docker-build
      - name: Push to registry
        run: docker push oneflow-ai:${{ github.sha }}
  
  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Deploy to K8s
        run: kubectl set image deployment/oneflow-ai oneflow-ai=oneflow-ai:${{ github.sha }}
```

---

## ğŸ› Troubleshooting

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: API Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
make docker-logs

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ health
curl http://localhost:8000/health

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
make docker-restart
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: High latency

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
open http://localhost:9090

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ circuit breaker
curl http://localhost:8000/metrics | grep circuit

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ connections
kubectl get pods -n oneflow-ai
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Database connection errors

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ PostgreSQL
make db-shell

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ connection pool
curl http://localhost:8000/metrics | grep db_pool

# Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ pool size Ğ² .env
DATABASE_POOL_SIZE=30
```

---

## ğŸ“ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

### Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

- ğŸ“– [Deployment Guide](DEPLOYMENT.md)
- âœ… [Production Checklist](PRODUCTION_CHECKLIST.md)
- ğŸ“ [Implementation Summary](IMPLEMENTATION_SUMMARY.md)
- ğŸ”§ [API Reference](http://localhost:8000/docs)

### ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹

- **Email**: voroninsergeiai@gmail.com
- **GitHub**: [@voroninsergei](https://github.com/voroninsergei)
- **Issues**: [GitHub Issues](https://github.com/voroninsergei/oneflow-ai/issues)

### ĞšĞ¾Ğ¼Ğ¼ÑŒÑĞ½Ğ¸Ñ‚Ğ¸

- ğŸ’¬ Ğ—Ğ°Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ: [Discussions](https://github.com/voroninsergei/oneflow-ai/discussions)
- ğŸ› Ğ¡Ğ¾Ğ¾Ğ±Ñ‰Ğ¸Ñ‚ÑŒ Ğ¾ Ğ±Ğ°Ğ³Ğµ: [Issues](https://github.com/voroninsergei/oneflow-ai/issues)
- ğŸ‰ ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ feature: [Feature Requests](https://github.com/voroninsergei/oneflow-ai/discussions/categories/ideas)

---

## ğŸ¤ Contributing

ĞœÑ‹ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµĞ¼ Ğ²ĞºĞ»Ğ°Ğ´ Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚! ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°:

1. Fork Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ (`git commit -m 'Add amazing feature'`)
4. Push Ğ² branch (`git push origin feature/amazing-feature`)
5. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Pull Request

### Code Style

```bash
# ĞŸĞµÑ€ĞµĞ´ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ¼
make format
make lint
make test
make type-check
```

---

## ğŸ“œ License

Proprietary License - Copyright (c) 2025 Sergey Voronin. All rights reserved.

See [LICENSE](LICENSE) file for details.

---

## ğŸ™ Ğ‘Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ğ½Ğ¾ÑÑ‚Ğ¸

ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼:

- **FastAPI** - Modern web framework
- **SQLAlchemy** - SQL toolkit and ORM
- **Pydantic** - Data validation
- **Prometheus** - Monitoring and alerting
- **OpenTelemetry** - Observability framework
- **Kubernetes** - Container orchestration
- **Docker** - Containerization
- **PostgreSQL** - Relational database
- **Redis** - In-memory data store

---

## ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Production Readiness: 99%              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Observability:        100%          â”‚
â”‚  âœ… Reliability:          95%           â”‚
â”‚  âœ… Security:             100%          â”‚
â”‚  âœ… Performance:          100%          â”‚
â”‚  âœ… Infrastructure:       100%          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ Files:                50+           â”‚
â”‚  ğŸ§ª Tests:                80+ (80%)     â”‚
â”‚  ğŸ“š Documentation:        Complete      â”‚
â”‚  ğŸ³ Docker:               Ready         â”‚
â”‚  â˜¸ï¸  Kubernetes:          Ready         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Made with â¤ï¸ by Sergey Voronin**

*OneFlow.AI - Simplifying AI Model Integration since 2025*
